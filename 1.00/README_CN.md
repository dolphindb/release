# DolphinDB发行说明

## DolphinDB服务器

版本号： 1.00.0
发行日期： 2019-12-02

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.0.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.0.zip) | 


版本号： 1.00.1
发行日期： 2019.12.11

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.1.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.1.zip) | 

版本号： 1.00.2
发行日期： 2019.12.16

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.2.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.2.zip) | 

版本号： 1.00.3
发行日期： 2019.12.18

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.3.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.3.zip) | 


版本号： 1.00.4
发行日期： 2019.12.20

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.4.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.4.zip) | 

版本号： 1.00.5
发行日期： 2019.12.23

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.5.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.5.zip) | 

版本号： 1.00.6
发行日期： 2020.01.06

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.6.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.6.zip) | 

版本号： 1.00.7
发行日期： 2020.01.17

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.7.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.7.zip) | 

版本号： 1.00.8
发行日期： 2020.01.19

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.8.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.8_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.8.zip) | 

版本号： 1.00.9
发行日期： 2020.01.30

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.9.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.9_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.9.zip) | 


版本号： 1.00.10
发行日期： 2020.02.17

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.10.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.10_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.10.zip) | 

版本号： 1.00.11
发行日期： 2020.02.28

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.11.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.11.zip) | 

版本号： 1.00.12
发行日期： 2020.03.05

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.12.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.12.zip) | 

版本号： 1.00.13
发行日期： 2020.03.15

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.13.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.13_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.13.zip) | 

版本号： 1.00.14
发行日期： 2020.03.24

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.14.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.14_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.14.zip) | 



版本号： 1.00.15
发行日期： 2020.04.08

[Linux64 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.15.zip) | 
[Linux64 ABI=1 binary](http://www.dolphindb.com/downloads/DolphinDB_Linux64_V1.00.15_ABI.zip) | 
[Windows64 binary](http://www.dolphindb.com/downloads/DolphinDB_Win64_V1.00.15.zip) |


> 新功能

* 增加了基于Raft协议的流数据高可用。 

* 新增以下函数：

    * 时间处理函数`dayOfYear,dayOfMonth,
quarterOfYear,monthOfYear,weekOfYear,hourOfDay,minuteOfHour,secondOfMinute,weekday,yearBegin,yearEnd,businessYearBegin,businessYearEnd,monthBegin,monthEnd,semiMonthBegin,semiMonthEnd,businessMonthBegin,businessMonthEnd,quarterBegin,quarterEnd,quarterBusinessBegin,quarterBusinessEnd,week,lastWeekOfMonth,weekOfMonth,
fy5253,fy5253Quarter,isYearStart,isYearEnd,isQuarterStart,isQuarterEnd,isMonthStart,isMonthEnd,isLeapYear,daysInMonth,weekBegin`

    * 字符串相关函数`isUpper,isLower,isTitle,isSpace,isAlpha,isNumeric,isDigit,isAlNum,isDecimal,charAt`
    * 窗口相关函数`ewmMean,ewmStd,ewmVar,ewmCov,ewmCorr`
    * 数学类函数`isMonotonic,isMonotonicIncreasing,isMonotonicDecreasing,quantile,quantileSeries,cumcount,percentChange,sem,mad`
    * 向量判重函数`nunique`
    * 插值函数`interpolate`

* SQL中支持hint常量 HINT_HASH，HINT_SNAPSHOT，HINT_KEEPORDER，具体用法参考用户手册`sql`函数。

* 新增函数`getOS`, `getOSBit`, `parseExpr`, `dayOfWeek` (**1.00.1**)

* 对于不可分解的简单任务，其循环执行过程也可以被`cancelJob`与`cancelConsoleJob`函数终止。 (**1.00.1**)

* 增加了函数`mmse`(**1.00.3**)

* `replay`函数增加了 absoluteRate 参数，支持以数据产生速度的指定倍数进行回放。 (**1.00.4**)

* 增加了`fill!`函数。 (**1.00.5**)

* 新增数学函数: `sinh, cosh, tanh, asinh, acosh, atanh, deg2rad, rad2deg`。(**1.00.7**)

* 新增线性规划函数：`linprog`。(**1.00.7**)

* 新增hashBucket函数，用于计算即将写入数据的哈希分区值，便于并行写入。(**1.00.8**)

* 新增函数`capacity`,用于查看一个vector在当前分配的内存中的容量即可以容纳元素的个数。(**1.00.9**)

* 支持键值表keyedTable。新增加的数据在keyedTable中存在相同主键值时，会覆盖相同主键的数据。（**1.00.10**）

* `linprog`函数新增三个参数：lb, ub 与 method。lb表示变量的下界。ub表示变量的上界。method表示算法，目前支持'simplex'和'interior-point'。(**1.00.11**)

> 改进:

* 允许`scheduleJob`直接或间接调用module中定义的函数。

* `isMonotonic`, `isMonotonicIncreasing`, `isMonotonicDecreasing`函数由严格单调递增或递减改为非严格递增或递减。(**1.00.2**)

* 除了vector和matrix, `nullFill!`, `bfill!`, `ffill!`, `lfill!` 可以接受内存表作为输入参数，支持对整表所有列替换null值。(**1.00.2**)

* 完善了时序聚合引擎，可以处理仅能保证时间戳在分组内有序的数据流（即不是全局有序数据流）。(**1.00.3**)

* 时序聚合引擎的窗口对齐尺度扩展到支持分钟级别。(**1.00.3**)

* 改进了文本文件数据导入的相关函数`loadText`、`ploadText`、`loadTextEx`、`textChunkDS`以及`extractTextScheama`。（**1.00.6**） 
    * 允许忽略文件开始指定行数。
    * 允许为日期和时间类型指定解析格式。
    * 允许仅导入指定的部分列。
    * 整型或者浮点类型前后有非数字字符则忽略，如果不包含任何数字则返回空值（以前版本返回0）。
    * 可以解析整数或浮点数中的逗号分隔符。
    * `loadTextEx`可以指定一个转换函数。导入的数据转换后再追加到数据库表中。
* 改进了函数 `sum3`与`sum4`。当应用于矩阵时，`sum3`和`sum4`计算每行的统计信息。之前计算的是整个矩阵的统计信息。(**1.00.7**)

* 修改了函数 `percentile`和`mpercentile`：从最近序数(nearest rank)方法改为插值(interpolation)方法，与pandas保持一致。插值方法有'linear', 'lower', 'higher', 'midpoint' 与 'nearest' 这5种。(**1.00.7**)

* 提升共享内存表的并发性能。(**1.00.9**)

* 提升vector和matrix对内存的使用效率。(**1.00.9**)

* 增加对matrix行数的校验，不允许创建行数为0的matrix。(**1.00.9**)

* 函数`createTimeSeriesAggregator`增加了`updateTime`和`useWindowStartTime`参数。`updateTime`可以以比参数`step`更小的时间间隔触发计算。`useWindowStartTime`用于设置是否采用当前窗口的起始时间。(**1.00.10**)

* 完善delete语句的反序列化，取消了where子句过滤条件必须是一个表达式（有运算符）的规则。(**1.00.10**)

* getSessionMemoryStat函数会输出客户端的ip地址和端口。(**1.00.10**)

* 改进了`loadText`的一个功能：对只包含header的文本文件，若用户指定了schema, `loadText`函数不再抛出异常，而是返回一个空表。(**1.00.11**)

* 改进了流数据时间序列聚合引擎。当时间列出现空值或前后两条数据时间跨度较大时，性能不会下降。(**1.00.11**)

* 改进了loadText函数的数据类型识别算法。避免因为文本中偶尔出现的代表null值的文本（例如：null, N/A等）而将数值类型错误识别为字符串或符号类型。(**1.00.13**)

* 改进了函数isDuplicated，使其可以接受用SubVector封装的数组，这在支持多版本的分布式表或内存表中会用到。(**1.00.13**)

* 改进了函数createPartitionedTable，可以使用流数据表和mvcc表作为样例表（model table）(**1.00.13**)

* 改进了代码反序列化。即当代码反序列化时，若遇到共享表不存在，不再抛出异常，而是通过调用函数objByName来取得共享表，使得反序列化可以继续。(**1.00.13**)

* 函数`subarray`中子数组的起始与结束位置相同，可以指定一个空的子数组。例如：subarray(x, 0:0)。(**1.00.15**)

* 函数`subarray`中子数组允许不指定开始或结束位置。例如：subarray(x, 2:) 或 subarray(x, :5)。(**1.00.15**)

* 函数`iterate`的input参数允许包含空值。空值在计算时视为0处理。(**1.00.15**)

* 提高了函数`iif`的性能。大部分情况下可以提升1倍的性能。(**1.00.15**)

* 函数`loadText`支持以carriage return （'\r'）为换行符的文件。(**1.00.15**)

* 把空字符串解析为IP地址时，不再抛出异常，而是解析为空IP地址。(**1.00.15**)

* 函数`char`, `short`, `int`, `long`, `float`和`double`解析字符串时，如果输入的字符串为空或者不是一个数值，返回相应数据类型的空值而不是0。(**1.00.15**)

* 在使用函数`restore`数据的过程中，如果出错会抛出异常。之前只记log。(**1.00.15**)

* 函数`migrate`新增支持一次性恢复备份文件夹内所有数据库和表。(**1.00.15**)

* 函数`dropDatabase`和`existsDatabase`的路径最后一个字符如果是斜杠或反斜杠，会自动删除。(**1.00.15**)



> Bug修复:

* 对数据表使用`reorderColumns!`函数之后，再进行更新操作会导致crash。

* 针对内存分区表的sql update和sql delete语句如果使用了本地变量会导致crash。 (**1.00.1**)

* 修复在元数据高可用场景下，Follower控制节点内存泄漏问题。 (**1.00.1**)

* 修复job序列化问题。 当一个module函数被多个module调用导致反序列化失败。 (**1.00.1**)

* 修复 single mode 元数据未及时做checkpoint导致重启慢的问题。(**1.00.1**)

* 修复 `createTimeSeriesAggregator` 函数指定多个keyColumn时引起crash问题。(**1.00.2**)

* 修复在多层分区数据库中使用`loadTableBySQL`读取数据为空的问题。 (**1.00.2**)

* 包含多表的分布式库，多次对其中一个表做dropPartition和写入数据后，可能发生缓存数据corrupted异常。 (**1.00.4**)

* 修复sql中涉及1970年之前的日期数据时可能引起crash的问题。 (**1.00.5**)

* 修复了序列化函数视图中赋值语句的一个bug：如果赋值语句右边是常数组，序列化后多次运行该视图函数，这个常数组可能会被修改，导致计算结果有误或crash。 (**1.00.6**)

* 修复了`loadTable`加载顺序(SEQ)分区表数据有误的一个bug：使用`loadTable`加载顺序分区的磁盘表时，若指定分区参数是一个长度为N的向量，那么实际加载的数据是前N个分区的数据， 而不是向量中指定的分区中的数据。(**1.00.7**)

* 修复了定时任务(Scheduled Job)无法正常加载的bug：定时任务若引用了视图函数，会无法加载视图函数，导致系统启动失败。(**1.00.7**)

* 修复了删除数据库(`dropDatabase`)的一个bug：如果分区数据库的数据只存在于集群中的部分数据节点， 删除数据库时会在控制节点的元数据日志中写入一些空的Chunk编号，进而导致下次启动时重放日志失败。(**1.00.7**)

* 修复了字符串数组的潜在内存泄漏问题。若数组中某些字符串的字节长度超过22，执行以下操作可能导致内存泄漏：(**1.00.8**)
    * 在SQL语句中，对该字符串列使用group by, 且内部实现采用排序方法。 
    * 在SQL语句中，按多个列进行排序(order by)，其中第一个列是该字符串列。
    * 在SQL语句中，对该字符串列进行转置(pivot by)操作。
    * 对该字符串列使用`pivotby`, `contextby`, `groupby`, `semgentby` 或 `cutpoints`函数。
    
* 增加了lingpro函数的参数校验，修复非法参数导致crash的问题。(**1.00.10**)

* 修复了在自定义函数中调用函数parseExpr导致crash的bug。(**1.00.10**)

* 修复了`loadText`的一个bug：为nanotimestamp数据类型指定format时出现解析错误。(**1.00.11**) 

* 修复了向键值表中追加(append)数据会产生重复键值的问题。(**1.00.12**)
 
* 修复了SQL语句中含有4个或更多分组列, 并且在SQL语句中对SYMBOL类型字段进行函数调用时，发生crash的问题。(**1.00.12**)

* 修复了已存有数据的维度表被删除并重建后，查询数据时，显示该表不存在的bug。此bug仅发生在重建维度表之后，未写入数据之前。(**1.00.12**)

* 修复了提取字符串向量的错误，该错误会影响对带有context-by子句的SQL语句中的字符串或符号列使用聚合函数（例如last）。(**1.00.12**)
 
* 修复函数subscribeTable参数hash不起作用的bug。(**1.00.13**)

* 修复时间序列聚合引擎中调用std函数的bug，即当所有值相同时返回0，而不是null。(**1.00.13**)

* 修复反序列化部分应用（Partial Application）可能导致系统崩溃的bug。(**1.00.13**)

* 修复bug：在函数`createTimeSeriesAggregator`中进行`sum`或者`avg`运算时，当一组中所有行的某个被计算列均为空值时，应该返回空值而不是返回0。(**1.00.14**)

* 修复bug：在SQL语句中，通过哈希算法计算`sum`或者`avg`，并且一组中所有行的某个被计算列均为空值时，应该返回空值而不是返回0。(**1.00.14**)

* 修复bug：Windows版本中，一个客户端订阅关闭导致同一个节点上其它订阅端无法继续接受消息。(**1.00.14**)

* 修复对以字符'\\\\'结尾的字符串（例如"hello\\\\"）的解析错误，不再抛出异常。(**1.00.14**)

* 修复bug：定时作业（scheduled job）中，如果用到了一个module中的函数，server重启后无法使用该module。(**1.00.14**)

* 修复bug：线性规划（`linprog`）中，迭代计算中的舍入误差累积可能会导致计算错误。(**1.00.14**)

* 修复bug：字符串数组与非字符串数组先后进行排序后，选择位置最前的指定数量的行的结果有误。这个bug会影响`isortTop`函数的正确性。(**1.00.14**)

* 修复bug：若通过console或者GUI多次运行module文件，系统会重复注册module函数，导致系统crash或者抛出异常。(**1.00.14**)

* 修复bug：函数`update!`在有多个过滤条件时结果不正确。(**1.00.15**)

* 修复bug：对空的维度表插入空表导致查询抛出异常。（**1.00.15**）

* 修复bug：函数`iterate`的参数input不含空值时，系统可能会误认为含有空值，导致参数校验失败。（**1.00.15**）

* 修复bug：对一个FLOAT或DOUBLE向量，当`array`函数的default参数设为0-0.5之间时，会错误地对该向量元素赋值为0。(**1.00.15**)

* 修复bug：在context by查询语句中，如果同时使用通配符字段`*`以及返回多个结果的自定义函数，会导致查询结果不正确。(**1.00.15**)

* 修复bug：在context by或group by之后使用order by，如果需要排序的字段已经是用户指定的顺序（不需要重排），产生的查询结果（内存表）若继续用于计算，在对排序字段进行处理时可能产生不正确的结果。(**1.00.15**)

* 修复bug: 修复函数`loadText`, `ploadText`以及`loadText`解析以'.'或者'-.'为起始的代表数字的字符串会出现错误。例如，'.12'或者'-.12'会被错误地解析为12。该bug自版本1.00.6中引入。(**1.00.15**)



## DolphinDB GUI

* 支持远程同步 DolphinDB module的功能(Synchronize module to server)。

* 修复保存用户名密码后不生效的问题。

* 修复了在 windows下同步module失败的问题。 (**1.00.10**)

* single mode下web界面增加性能观察界面。(**1.00.10**)


## DolphinDB plugin binary files

* AWS S3, ZLIB, MYSQL, ODBC, HDF5 等插件已统一打包到 server/plugins 目录下。

* [插件源码](https://github.com/dolphindb/DolphinDBPlugin)

* ODBC

    `append` 方法提供了可选参数insertIgnore, 对于支持insert ignore语法的目标数据库，可以实现忽略主键重复数据的功能。


## DolphinDB APIs

* JAVA

    优化流数据重连稳定性
    
    修复了1970年之前的日期转换错误的问题
    
    新增hashBucket函数，用于计算即将写入数据的哈希分区值，便于并行写入。(**1.00.8**)

* C++ 

    优化流数据重连稳定性
    
    新增hashBucket函数，用于计算即将写入数据的哈希分区值，便于并行写入。(**1.00.8**)
    
* go  

    新增hashBucket函数，用于计算即将写入数据的哈希分区值，便于并行写入。(**1.00.8**)
   
* C# 

    支持新数据类型 UUID 与 IPADDR

